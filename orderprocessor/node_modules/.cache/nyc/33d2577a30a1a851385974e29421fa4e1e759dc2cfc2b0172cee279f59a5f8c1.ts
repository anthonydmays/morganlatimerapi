"use strict";var cov_9pl2bm03q=function(){var path="/home/anthony/morganlatimerapi/orderprocessor/src/intuit-client.ts";var hash="33b06d5f924cf6c5ccad7f1337cd4a95ea424148";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/anthony/morganlatimerapi/orderprocessor/src/intuit-client.ts",statementMap:{"0":{start:{line:2,column:16},end:{line:9,column:1}},"1":{start:{line:3,column:4},end:{line:8,column:7}},"2":{start:{line:4,column:36},end:{line:4,column:97}},"3":{start:{line:4,column:42},end:{line:4,column:70}},"4":{start:{line:4,column:85},end:{line:4,column:95}},"5":{start:{line:5,column:35},end:{line:5,column:100}},"6":{start:{line:5,column:41},end:{line:5,column:73}},"7":{start:{line:5,column:88},end:{line:5,column:98}},"8":{start:{line:6,column:32},end:{line:6,column:149}},"9":{start:{line:6,column:97},end:{line:6,column:119}},"10":{start:{line:7,column:8},end:{line:7,column:78}},"11":{start:{line:10,column:22},end:{line:12,column:1}},"12":{start:{line:11,column:4},end:{line:11,column:62}},"13":{start:{line:13,column:19},end:{line:19,column:1}},"14":{start:{line:14,column:4},end:{line:14,column:42}},"15":{start:{line:14,column:31},end:{line:14,column:42}},"16":{start:{line:15,column:17},end:{line:15,column:19}},"17":{start:{line:16,column:4},end:{line:16,column:99}},"18":{start:{line:16,column:21},end:{line:16,column:99}},"19":{start:{line:16,column:40},end:{line:16,column:99}},"20":{start:{line:16,column:80},end:{line:16,column:99}},"21":{start:{line:17,column:4},end:{line:17,column:28}},"22":{start:{line:18,column:4},end:{line:18,column:18}},"23":{start:{line:20,column:0},end:{line:20,column:62}},"24":{start:{line:21,column:23},end:{line:21,column:63}},"25":{start:{line:22,column:26},end:{line:22,column:69}},"26":{start:{line:23,column:15},end:{line:23,column:30}},"27":{start:{line:24,column:15},end:{line:24,column:66}},"28":{start:{line:27,column:8},end:{line:27,column:39}},"29":{start:{line:28,column:8},end:{line:28,column:32}},"30":{start:{line:31,column:8},end:{line:34,column:11}},"31":{start:{line:37,column:8},end:{line:48,column:11}},"32":{start:{line:38,column:12},end:{line:47,column:13}},"33":{start:{line:39,column:37},end:{line:39,column:76}},"34":{start:{line:40,column:16},end:{line:40,column:39}},"35":{start:{line:41,column:16},end:{line:41,column:77}},"36":{start:{line:42,column:16},end:{line:42,column:34}},"37":{start:{line:45,column:16},end:{line:45,column:33}},"38":{start:{line:46,column:16},end:{line:46,column:48}},"39":{start:{line:51,column:8},end:{line:70,column:11}},"40":{start:{line:52,column:12},end:{line:55,column:13}},"41":{start:{line:53,column:16},end:{line:53,column:88}},"42":{start:{line:54,column:16},end:{line:54,column:29}},"43":{start:{line:56,column:12},end:{line:59,column:13}},"44":{start:{line:57,column:16},end:{line:57,column:58}},"45":{start:{line:58,column:16},end:{line:58,column:28}},"46":{start:{line:60,column:12},end:{line:60,column:54}},"47":{start:{line:61,column:12},end:{line:68,column:13}},"48":{start:{line:62,column:37},end:{line:62,column:69}},"49":{start:{line:63,column:16},end:{line:63,column:77}},"50":{start:{line:64,column:16},end:{line:64,column:28}},"51":{start:{line:67,column:16},end:{line:67,column:33}},"52":{start:{line:69,column:12},end:{line:69,column:25}},"53":{start:{line:73,column:8},end:{line:82,column:11}},"54":{start:{line:74,column:24},end:{line:74,column:40}},"55":{start:{line:75,column:34},end:{line:75,column:79}},"56":{start:{line:76,column:29},end:{line:78,column:14}},"57":{start:{line:79,column:29},end:{line:80,column:50}},"58":{start:{line:81,column:12},end:{line:81,column:46}},"59":{start:{line:85,column:8},end:{line:94,column:11}},"60":{start:{line:86,column:24},end:{line:86,column:40}},"61":{start:{line:87,column:35},end:{line:87,column:81}},"62":{start:{line:88,column:32},end:{line:92,column:14}},"63":{start:{line:93,column:12},end:{line:93,column:49}},"64":{start:{line:97,column:8},end:{line:106,column:11}},"65":{start:{line:98,column:24},end:{line:98,column:40}},"66":{start:{line:99,column:33},end:{line:99,column:77}},"67":{start:{line:100,column:29},end:{line:102,column:14}},"68":{start:{line:103,column:28},end:{line:104,column:49}},"69":{start:{line:105,column:12},end:{line:105,column:27}},"70":{start:{line:109,column:8},end:{line:135,column:11}},"71":{start:{line:110,column:24},end:{line:110,column:40}},"72":{start:{line:111,column:34},end:{line:111,column:79}},"73":{start:{line:112,column:28},end:{line:132,column:13}},"74":{start:{line:122,column:61},end:{line:131,column:17}},"75":{start:{line:133,column:31},end:{line:133,column:59}},"76":{start:{line:134,column:12},end:{line:134,column:30}},"77":{start:{line:138,column:8},end:{line:144,column:17}},"78":{start:{line:147,column:8},end:{line:147,column:261}},"79":{start:{line:150,column:0},end:{line:150,column:36}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:2,column:44},end:{line:2,column:45}},loc:{start:{line:2,column:89},end:{line:9,column:1}},line:2},"1":{name:"(anonymous_1)",decl:{start:{line:3,column:36},end:{line:3,column:37}},loc:{start:{line:3,column:63},end:{line:8,column:5}},line:3},"2":{name:"fulfilled",decl:{start:{line:4,column:17},end:{line:4,column:26}},loc:{start:{line:4,column:34},end:{line:4,column:99}},line:4},"3":{name:"rejected",decl:{start:{line:5,column:17},end:{line:5,column:25}},loc:{start:{line:5,column:33},end:{line:5,column:102}},line:5},"4":{name:"step",decl:{start:{line:6,column:17},end:{line:6,column:21}},loc:{start:{line:6,column:30},end:{line:6,column:151}},line:6},"5":{name:"(anonymous_5)",decl:{start:{line:6,column:76},end:{line:6,column:77}},loc:{start:{line:6,column:95},end:{line:6,column:121}},line:6},"6":{name:"(anonymous_6)",decl:{start:{line:10,column:56},end:{line:10,column:57}},loc:{start:{line:10,column:71},end:{line:12,column:1}},line:10},"7":{name:"(anonymous_7)",decl:{start:{line:13,column:50},end:{line:13,column:51}},loc:{start:{line:13,column:65},end:{line:19,column:1}},line:13},"8":{name:"(anonymous_8)",decl:{start:{line:26,column:4},end:{line:26,column:5}},loc:{start:{line:26,column:29},end:{line:29,column:5}},line:26},"9":{name:"(anonymous_9)",decl:{start:{line:30,column:4},end:{line:30,column:5}},loc:{start:{line:30,column:16},end:{line:35,column:5}},line:30},"10":{name:"(anonymous_10)",decl:{start:{line:36,column:4},end:{line:36,column:5}},loc:{start:{line:36,column:20},end:{line:49,column:5}},line:36},"11":{name:"(anonymous_11)",decl:{start:{line:37,column:47},end:{line:37,column:48}},loc:{start:{line:37,column:60},end:{line:48,column:9}},line:37},"12":{name:"(anonymous_12)",decl:{start:{line:50,column:4},end:{line:50,column:5}},loc:{start:{line:50,column:24},end:{line:71,column:5}},line:50},"13":{name:"(anonymous_13)",decl:{start:{line:51,column:47},end:{line:51,column:48}},loc:{start:{line:51,column:60},end:{line:70,column:9}},line:51},"14":{name:"(anonymous_14)",decl:{start:{line:72,column:4},end:{line:72,column:5}},loc:{start:{line:72,column:23},end:{line:83,column:5}},line:72},"15":{name:"(anonymous_15)",decl:{start:{line:73,column:47},end:{line:73,column:48}},loc:{start:{line:73,column:60},end:{line:82,column:9}},line:73},"16":{name:"(anonymous_16)",decl:{start:{line:84,column:4},end:{line:84,column:5}},loc:{start:{line:84,column:29},end:{line:95,column:5}},line:84},"17":{name:"(anonymous_17)",decl:{start:{line:85,column:47},end:{line:85,column:48}},loc:{start:{line:85,column:60},end:{line:94,column:9}},line:85},"18":{name:"(anonymous_18)",decl:{start:{line:96,column:4},end:{line:96,column:5}},loc:{start:{line:96,column:28},end:{line:107,column:5}},line:96},"19":{name:"(anonymous_19)",decl:{start:{line:97,column:47},end:{line:97,column:48}},loc:{start:{line:97,column:60},end:{line:106,column:9}},line:97},"20":{name:"(anonymous_20)",decl:{start:{line:108,column:4},end:{line:108,column:5}},loc:{start:{line:108,column:35},end:{line:136,column:5}},line:108},"21":{name:"(anonymous_21)",decl:{start:{line:109,column:47},end:{line:109,column:48}},loc:{start:{line:109,column:60},end:{line:135,column:9}},line:109},"22":{name:"(anonymous_22)",decl:{start:{line:122,column:43},end:{line:122,column:44}},loc:{start:{line:122,column:61},end:{line:131,column:17}},line:122},"23":{name:"(anonymous_23)",decl:{start:{line:137,column:4},end:{line:137,column:5}},loc:{start:{line:137,column:26},end:{line:145,column:5}},line:137},"24":{name:"(anonymous_24)",decl:{start:{line:146,column:4},end:{line:146,column:5}},loc:{start:{line:146,column:16},end:{line:148,column:5}},line:146}},branchMap:{"0":{loc:{start:{line:2,column:16},end:{line:9,column:1}},type:"binary-expr",locations:[{start:{line:2,column:17},end:{line:2,column:21}},{start:{line:2,column:25},end:{line:2,column:39}},{start:{line:2,column:44},end:{line:9,column:1}}],line:2},"1":{loc:{start:{line:3,column:16},end:{line:3,column:34}},type:"binary-expr",locations:[{start:{line:3,column:16},end:{line:3,column:17}},{start:{line:3,column:22},end:{line:3,column:33}}],line:3},"2":{loc:{start:{line:6,column:32},end:{line:6,column:148}},type:"cond-expr",locations:[{start:{line:6,column:46},end:{line:6,column:67}},{start:{line:6,column:70},end:{line:6,column:148}}],line:6},"3":{loc:{start:{line:7,column:51},end:{line:7,column:67}},type:"binary-expr",locations:[{start:{line:7,column:51},end:{line:7,column:61}},{start:{line:7,column:65},end:{line:7,column:67}}],line:7},"4":{loc:{start:{line:10,column:22},end:{line:12,column:1}},type:"binary-expr",locations:[{start:{line:10,column:23},end:{line:10,column:27}},{start:{line:10,column:31},end:{line:10,column:51}},{start:{line:10,column:56},end:{line:12,column:1}}],line:10},"5":{loc:{start:{line:11,column:11},end:{line:11,column:61}},type:"cond-expr",locations:[{start:{line:11,column:37},end:{line:11,column:40}},{start:{line:11,column:43},end:{line:11,column:61}}],line:11},"6":{loc:{start:{line:11,column:12},end:{line:11,column:33}},type:"binary-expr",locations:[{start:{line:11,column:12},end:{line:11,column:15}},{start:{line:11,column:19},end:{line:11,column:33}}],line:11},"7":{loc:{start:{line:13,column:19},end:{line:19,column:1}},type:"binary-expr",locations:[{start:{line:13,column:20},end:{line:13,column:24}},{start:{line:13,column:28},end:{line:13,column:45}},{start:{line:13,column:50},end:{line:19,column:1}}],line:13},"8":{loc:{start:{line:14,column:4},end:{line:14,column:42}},type:"if",locations:[{start:{line:14,column:4},end:{line:14,column:42}},{start:{line:14,column:4},end:{line:14,column:42}}],line:14},"9":{loc:{start:{line:14,column:8},end:{line:14,column:29}},type:"binary-expr",locations:[{start:{line:14,column:8},end:{line:14,column:11}},{start:{line:14,column:15},end:{line:14,column:29}}],line:14},"10":{loc:{start:{line:16,column:4},end:{line:16,column:99}},type:"if",locations:[{start:{line:16,column:4},end:{line:16,column:99}},{start:{line:16,column:4},end:{line:16,column:99}}],line:16},"11":{loc:{start:{line:16,column:40},end:{line:16,column:99}},type:"if",locations:[{start:{line:16,column:40},end:{line:16,column:99}},{start:{line:16,column:40},end:{line:16,column:99}}],line:16},"12":{loc:{start:{line:52,column:12},end:{line:55,column:13}},type:"if",locations:[{start:{line:52,column:12},end:{line:55,column:13}},{start:{line:52,column:12},end:{line:55,column:13}}],line:52},"13":{loc:{start:{line:56,column:12},end:{line:59,column:13}},type:"if",locations:[{start:{line:56,column:12},end:{line:59,column:13}},{start:{line:56,column:12},end:{line:59,column:13}}],line:56},"14":{loc:{start:{line:79,column:29},end:{line:80,column:50}},type:"binary-expr",locations:[{start:{line:79,column:29},end:{line:79,column:60}},{start:{line:80,column:16},end:{line:80,column:50}}],line:79},"15":{loc:{start:{line:103,column:28},end:{line:104,column:49}},type:"binary-expr",locations:[{start:{line:103,column:28},end:{line:103,column:58}},{start:{line:104,column:16},end:{line:104,column:49}}],line:103},"16":{loc:{start:{line:138,column:15},end:{line:144,column:16}},type:"cond-expr",locations:[{start:{line:138,column:26},end:{line:144,column:9}},{start:{line:144,column:12},end:{line:144,column:16}}],line:138}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},b:{"0":[0,0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0,0],"5":[0,0],"6":[0,0],"7":[0,0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184",hash:"33b06d5f924cf6c5ccad7f1337cd4a95ea424148"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}return coverage[path]=coverageData;}();var __awaiter=(cov_9pl2bm03q.s[0]++,(cov_9pl2bm03q.b[0][0]++,this)&&(cov_9pl2bm03q.b[0][1]++,this.__awaiter)||(cov_9pl2bm03q.b[0][2]++,function(thisArg,_arguments,P,generator){cov_9pl2bm03q.f[0]++;cov_9pl2bm03q.s[1]++;return new((cov_9pl2bm03q.b[1][0]++,P)||(cov_9pl2bm03q.b[1][1]++,P=Promise))(function(resolve,reject){cov_9pl2bm03q.f[1]++;function fulfilled(value){cov_9pl2bm03q.f[2]++;cov_9pl2bm03q.s[2]++;try{cov_9pl2bm03q.s[3]++;step(generator.next(value));}catch(e){cov_9pl2bm03q.s[4]++;reject(e);}}function rejected(value){cov_9pl2bm03q.f[3]++;cov_9pl2bm03q.s[5]++;try{cov_9pl2bm03q.s[6]++;step(generator["throw"](value));}catch(e){cov_9pl2bm03q.s[7]++;reject(e);}}function step(result){cov_9pl2bm03q.f[4]++;cov_9pl2bm03q.s[8]++;result.done?(cov_9pl2bm03q.b[2][0]++,resolve(result.value)):(cov_9pl2bm03q.b[2][1]++,new P(function(resolve){cov_9pl2bm03q.f[5]++;cov_9pl2bm03q.s[9]++;resolve(result.value);}).then(fulfilled,rejected));}cov_9pl2bm03q.s[10]++;step((generator=generator.apply(thisArg,(cov_9pl2bm03q.b[3][0]++,_arguments)||(cov_9pl2bm03q.b[3][1]++,[]))).next());});}));var __importDefault=(cov_9pl2bm03q.s[11]++,(cov_9pl2bm03q.b[4][0]++,this)&&(cov_9pl2bm03q.b[4][1]++,this.__importDefault)||(cov_9pl2bm03q.b[4][2]++,function(mod){cov_9pl2bm03q.f[6]++;cov_9pl2bm03q.s[12]++;return(cov_9pl2bm03q.b[6][0]++,mod)&&(cov_9pl2bm03q.b[6][1]++,mod.__esModule)?(cov_9pl2bm03q.b[5][0]++,mod):(cov_9pl2bm03q.b[5][1]++,{"default":mod});}));var __importStar=(cov_9pl2bm03q.s[13]++,(cov_9pl2bm03q.b[7][0]++,this)&&(cov_9pl2bm03q.b[7][1]++,this.__importStar)||(cov_9pl2bm03q.b[7][2]++,function(mod){cov_9pl2bm03q.f[7]++;cov_9pl2bm03q.s[14]++;if((cov_9pl2bm03q.b[9][0]++,mod)&&(cov_9pl2bm03q.b[9][1]++,mod.__esModule)){cov_9pl2bm03q.b[8][0]++;cov_9pl2bm03q.s[15]++;return mod;}else{cov_9pl2bm03q.b[8][1]++;}var result=(cov_9pl2bm03q.s[16]++,{});cov_9pl2bm03q.s[17]++;if(mod!=null){cov_9pl2bm03q.b[10][0]++;cov_9pl2bm03q.s[18]++;for(var k in mod){cov_9pl2bm03q.s[19]++;if(Object.hasOwnProperty.call(mod,k)){cov_9pl2bm03q.b[11][0]++;cov_9pl2bm03q.s[20]++;result[k]=mod[k];}else{cov_9pl2bm03q.b[11][1]++;}}}else{cov_9pl2bm03q.b[10][1]++;}cov_9pl2bm03q.s[21]++;result["default"]=mod;cov_9pl2bm03q.s[22]++;return result;}));cov_9pl2bm03q.s[23]++;Object.defineProperty(exports,"__esModule",{value:true});const intuit_oauth_1=(cov_9pl2bm03q.s[24]++,__importDefault(require("intuit-oauth")));const node_quickbooks_1=(cov_9pl2bm03q.s[25]++,__importDefault(require("node-quickbooks")));const util_1=(cov_9pl2bm03q.s[26]++,require("util"));const config=(cov_9pl2bm03q.s[27]++,__importStar(require("../intuit_config.prod.json")));class IntuitClient{constructor(oAuthClient){cov_9pl2bm03q.f[8]++;cov_9pl2bm03q.s[28]++;this.oAuthClient=oAuthClient;cov_9pl2bm03q.s[29]++;this.authorized=false;}authorize(){cov_9pl2bm03q.f[9]++;cov_9pl2bm03q.s[30]++;return this.oAuthClient.authorizeUri({scope:[intuit_oauth_1.default.scopes.Accounting,intuit_oauth_1.default.scopes.OpenId],state:'morganlatimerapi'});}fetchToken(url){cov_9pl2bm03q.f[10]++;cov_9pl2bm03q.s[31]++;return __awaiter(this,void 0,void 0,function*(){cov_9pl2bm03q.f[11]++;cov_9pl2bm03q.s[32]++;try{const authResponse=(cov_9pl2bm03q.s[33]++,yield this.oAuthClient.createToken(url));cov_9pl2bm03q.s[34]++;this.authorized=true;cov_9pl2bm03q.s[35]++;console.log(JSON.stringify(authResponse.getJson(),null,2));cov_9pl2bm03q.s[36]++;return'Success.';}catch(e){cov_9pl2bm03q.s[37]++;console.error(e);cov_9pl2bm03q.s[38]++;return'Failed to fetch token.';}});}maybeRefreshToken(){cov_9pl2bm03q.f[12]++;cov_9pl2bm03q.s[39]++;return __awaiter(this,void 0,void 0,function*(){cov_9pl2bm03q.f[13]++;cov_9pl2bm03q.s[40]++;if(!this.authorized){cov_9pl2bm03q.b[12][0]++;cov_9pl2bm03q.s[41]++;console.error('Intuit API access not authorized. Please grant access.');cov_9pl2bm03q.s[42]++;return false;}else{cov_9pl2bm03q.b[12][1]++;}cov_9pl2bm03q.s[43]++;if(this.oAuthClient.isAccessTokenValid()){cov_9pl2bm03q.b[13][0]++;cov_9pl2bm03q.s[44]++;console.log('Intuit access token valid.');cov_9pl2bm03q.s[45]++;return true;}else{cov_9pl2bm03q.b[13][1]++;}cov_9pl2bm03q.s[46]++;console.log('Refreshing Intuit token...');cov_9pl2bm03q.s[47]++;try{const authResponse=(cov_9pl2bm03q.s[48]++,yield this.oAuthClient.refresh());cov_9pl2bm03q.s[49]++;console.log(JSON.stringify(authResponse.getJson(),null,2));cov_9pl2bm03q.s[50]++;return true;}catch(e){cov_9pl2bm03q.s[51]++;console.error(e);}cov_9pl2bm03q.s[52]++;return false;});}getCustomer(email){cov_9pl2bm03q.f[14]++;cov_9pl2bm03q.s[53]++;return __awaiter(this,void 0,void 0,function*(){cov_9pl2bm03q.f[15]++;const qbo=(cov_9pl2bm03q.s[54]++,this.getClient());const findCustomers=(cov_9pl2bm03q.s[55]++,util_1.promisify(qbo.findCustomers).bind(qbo));const response=(cov_9pl2bm03q.s[56]++,yield findCustomers({PrimaryEmailAddr:email}));const customer=(cov_9pl2bm03q.s[57]++,(cov_9pl2bm03q.b[14][0]++,response.QueryResponse.Customer)&&(cov_9pl2bm03q.b[14][1]++,response.QueryResponse.Customer[0]));cov_9pl2bm03q.s[58]++;return this.mapCustomer(customer);});}createCustomer(customer){cov_9pl2bm03q.f[16]++;cov_9pl2bm03q.s[59]++;return __awaiter(this,void 0,void 0,function*(){cov_9pl2bm03q.f[17]++;const qbo=(cov_9pl2bm03q.s[60]++,this.getClient());const createCustomer=(cov_9pl2bm03q.s[61]++,util_1.promisify(qbo.createCustomer).bind(qbo));const newCustomer=(cov_9pl2bm03q.s[62]++,yield createCustomer({GivenName:customer.firstName,FamilyName:customer.lastName,PrimaryEmailAddr:{Address:customer.email}}));cov_9pl2bm03q.s[63]++;return this.mapCustomer(newCustomer);});}getInvoice(orderNumber){cov_9pl2bm03q.f[18]++;cov_9pl2bm03q.s[64]++;return __awaiter(this,void 0,void 0,function*(){cov_9pl2bm03q.f[19]++;const qbo=(cov_9pl2bm03q.s[65]++,this.getClient());const findInvoices=(cov_9pl2bm03q.s[66]++,util_1.promisify(qbo.findInvoices).bind(qbo));const response=(cov_9pl2bm03q.s[67]++,yield findInvoices({DocNumber:String(orderNumber)}));const invoice=(cov_9pl2bm03q.s[68]++,(cov_9pl2bm03q.b[15][0]++,response.QueryResponse.Invoice)&&(cov_9pl2bm03q.b[15][1]++,response.QueryResponse.Invoice[0]));cov_9pl2bm03q.s[69]++;return invoice;});}createInvoice(order,customer){cov_9pl2bm03q.f[20]++;cov_9pl2bm03q.s[70]++;return __awaiter(this,void 0,void 0,function*(){cov_9pl2bm03q.f[21]++;const qbo=(cov_9pl2bm03q.s[71]++,this.getClient());const createInvoice=(cov_9pl2bm03q.s[72]++,util_1.promisify(qbo.createInvoice).bind(qbo));const invoice=(cov_9pl2bm03q.s[73]++,{CustomerRef:{value:customer.ref.Id,name:customer.ref.DisplayName},BillEmail:{Address:customer.email},DocNumber:order.number,TrackingNum:order.transaction_id,TxnDate:order.date,DueDate:order.date,Line:order.line_items.map((lineItem,i)=>{cov_9pl2bm03q.f[22]++;cov_9pl2bm03q.s[74]++;return{LineNum:i+1,Description:lineItem.name,DetailType:'SalesItemLineDetail',Amount:Number(lineItem.line_total),SalesItemLineDetail:{Qty:Number(lineItem.quantity),UnitPrice:Number(lineItem.unit_price)}};})});const newInvoice=(cov_9pl2bm03q.s[75]++,yield createInvoice(invoice));cov_9pl2bm03q.s[76]++;return newInvoice;});}mapCustomer(customer){cov_9pl2bm03q.f[23]++;cov_9pl2bm03q.s[77]++;return customer?(cov_9pl2bm03q.b[16][0]++,{id:customer.Id,firstName:customer.GivenName,lastName:customer.FamilyName,email:customer.PrimaryEmailAddr.Address,ref:customer}):(cov_9pl2bm03q.b[16][1]++,null);}getClient(){cov_9pl2bm03q.f[24]++;cov_9pl2bm03q.s[78]++;return new node_quickbooks_1.default(config.clientId,config.clientSecret,this.oAuthClient.token.access_token,false,''+this.oAuthClient.token.realmId,config.environment==='sandbox',config.debug,34,'2.0',this.oAuthClient.token.refresh_token);}}cov_9pl2bm03q.s[79]++;exports.IntuitClient=IntuitClient;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvYW50aG9ueS9tb3JnYW5sYXRpbWVyYXBpL29yZGVycHJvY2Vzc29yL3NyYy9pbnR1aXQtY2xpZW50LnRzIiwic291cmNlcyI6WyIvaG9tZS9hbnRob255L21vcmdhbmxhdGltZXJhcGkvb3JkZXJwcm9jZXNzb3Ivc3JjL2ludHVpdC1jbGllbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxnRUFBdUM7QUFDdkMsc0VBQXlDO0FBQ3pDLCtCQUErQjtBQUcvQixtRUFBcUQ7QUFFckQsTUFBYSxZQUFZO0lBR3ZCLFlBQTZCLFdBQXdCO1FBQXhCLGdCQUFXLEdBQVgsV0FBVyxDQUFhO1FBRjVDLGVBQVUsR0FBRyxLQUFLLENBQUM7SUFFNEIsQ0FBQztJQUV6RCxTQUFTO1FBQ1AsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQztZQUNuQyxLQUFLLEVBQUUsQ0FBQyxzQkFBVyxDQUFDLE1BQU0sQ0FBQyxVQUFVLEVBQUUsc0JBQVcsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDO1lBQ2pFLEtBQUssRUFBRSxrQkFBa0I7U0FDMUIsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVLLFVBQVUsQ0FBQyxHQUFXOztZQUMxQixJQUFJO2dCQUNGLE1BQU0sWUFBWSxHQUFHLE1BQU0sSUFBSSxDQUFDLFdBQVcsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQzdELElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO2dCQUN2QixPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLE9BQU8sRUFBRSxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUM3RCxPQUFPLFVBQVUsQ0FBQzthQUNuQjtZQUFDLE9BQU8sQ0FBQyxFQUFFO2dCQUNWLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2pCLE9BQU8sd0JBQXdCLENBQUM7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QUFDLENBQUMsQ0FBQztZQUNoQixFQUFFLEVBQUUsUUFBUSxDQUFDLEVBQUU7WUFDZixTQUFTLEVBQUUsUUFBUSxDQUFDLFNBQVM7WUFDN0IsUUFBUSxFQUFFLFFBQVEsQ0FBQyxVQUFVO1lBQzdCLEtBQUssRUFBRSxRQUFRLENBQUMsZ0JBQWdCLENBQUMsT0FBTztZQUN4QyxHQUFHLEVBQUUsUUFBUTtTQUNkLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztJQUNYLENBQUM7SUFFTyxTQUFTO1FBQ2YsT0FBTyxJQUFJLHlCQUFVLENBQ2pCLE1BQU0sQ0FBQyxRQUFRLEVBQ2YsTUFBTSxDQUFDLFlBQVksRUFDbkIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsWUFBWSxFQUNuQyxLQUFLLEVBQ0wsRUFBRSxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFDbkMsTUFBTSxDQUFDLFdBQVcsS0FBSyxTQUFTLEVBQ2hDLE1BQU0sQ0FBQyxLQUFLLEVBQ1osRUFBRSxFQUNGLEtBQUssRUFDTCxJQUFJLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUM3QyxDQUFDO0NBQ0Q7QUFoSUQsb0NBZ0lDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE9BdXRoQ2xpZW50IGZyb20gJ2ludHVpdC1vYXV0aCc7XG5pbXBvcnQgUXVpY2tCb29rcyBmcm9tICdub2RlLXF1aWNrYm9va3MnO1xuaW1wb3J0IHtwcm9taXNpZnl9IGZyb20gJ3V0aWwnO1xuXG5pbXBvcnQge0FjY291bnRpbmdDbGllbnQsIEN1c3RvbWVyfSBmcm9tICcuL2FjY291bnRpbmctY2xpZW50JztcbmltcG9ydCAqIGFzIGNvbmZpZyBmcm9tICcuLi9pbnR1aXRfY29uZmlnLnByb2QuanNvbic7XG5cbmV4cG9ydCBjbGFzcyBJbnR1aXRDbGllbnQgaW1wbGVtZW50cyBBY2NvdW50aW5nQ2xpZW50IHtcbiAgIHByaXZhdGUgYXV0aG9yaXplZCA9IGZhbHNlO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgb0F1dGhDbGllbnQ6IE9BdXRoQ2xpZW50KSB7fVxuXG4gIGF1dGhvcml6ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5vQXV0aENsaWVudC5hdXRob3JpemVVcmkoe1xuICAgICAgc2NvcGU6IFtPQXV0aENsaWVudC5zY29wZXMuQWNjb3VudGluZywgT0F1dGhDbGllbnQuc2NvcGVzLk9wZW5JZF0sXG4gICAgICBzdGF0ZTogJ21vcmdhbmxhdGltZXJhcGknLFxuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZmV0Y2hUb2tlbih1cmw6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGF1dGhSZXNwb25zZSA9IGF3YWl0IHRoaXMub0F1dGhDbGllbnQuY3JlYXRlVG9rZW4odXJsKTtcbiAgICAgIHRoaXMuYXV0aG9yaXplZCA9IHRydWU7XG4gICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShhdXRoUmVzcG9uc2UuZ2V0SnNvbigpLCBudWxsLCAyKSk7XG4gICAgICByZXR1cm4gJ1N1Y2Nlc3MuJztcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgcmV0dXJuICdGYWlsZWQgdG8gZmV0Y2ggdG9rZW4uJztcbiAgICB9XG4gIH1cblxuICBhc3luYyBtYXliZVJlZnJlc2hUb2tlbigpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICBpZiAoIXRoaXMuYXV0aG9yaXplZCkge1xuICAgICAgY29uc29sZS5lcnJvcignSW50dWl0IEFQSSBhY2Nlc3Mgbm90IGF1dGhvcml6ZWQuIFBsZWFzZSBncmFudCBhY2Nlc3MuJyk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmICh0aGlzLm9BdXRoQ2xpZW50LmlzQWNjZXNzVG9rZW5WYWxpZCgpKSB7XG4gICAgICBjb25zb2xlLmxvZygnSW50dWl0IGFjY2VzcyB0b2tlbiB2YWxpZC4nKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZygnUmVmcmVzaGluZyBJbnR1aXQgdG9rZW4uLi4nKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgYXV0aFJlc3BvbnNlID0gYXdhaXQgdGhpcy5vQXV0aENsaWVudC5yZWZyZXNoKCk7XG4gICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShhdXRoUmVzcG9uc2UuZ2V0SnNvbigpLCBudWxsLCAyKSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBhc3luYyBnZXRDdXN0b21lcihlbWFpbDogc3RyaW5nKTogUHJvbWlzZTxDdXN0b21lcnxudWxsPiB7XG4gICAgY29uc3QgcWJvID0gdGhpcy5nZXRDbGllbnQoKTtcbiAgICBjb25zdCBmaW5kQ3VzdG9tZXJzID0gcHJvbWlzaWZ5KHFiby5maW5kQ3VzdG9tZXJzKS5iaW5kKHFibyk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmaW5kQ3VzdG9tZXJzKHtcbiAgICAgIFByaW1hcnlFbWFpbEFkZHI6IGVtYWlsLFxuICAgIH0pO1xuICAgIGNvbnN0IGN1c3RvbWVyID0gcmVzcG9uc2UuUXVlcnlSZXNwb25zZS5DdXN0b21lciAmJlxuICAgICAgICByZXNwb25zZS5RdWVyeVJlc3BvbnNlLkN1c3RvbWVyWzBdO1xuICAgIHJldHVybiB0aGlzLm1hcEN1c3RvbWVyKGN1c3RvbWVyKTtcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUN1c3RvbWVyKGN1c3RvbWVyOiBDdXN0b21lcik6IFByb21pc2U8Q3VzdG9tZXJ8bnVsbD4ge1xuICAgIGNvbnN0IHFibyA9IHRoaXMuZ2V0Q2xpZW50KCk7XG4gICAgY29uc3QgY3JlYXRlQ3VzdG9tZXIgPSBwcm9taXNpZnkocWJvLmNyZWF0ZUN1c3RvbWVyKS5iaW5kKHFibyk7XG4gICAgY29uc3QgbmV3Q3VzdG9tZXIgPSBhd2FpdCBjcmVhdGVDdXN0b21lcih7XG4gICAgICBHaXZlbk5hbWU6IGN1c3RvbWVyLmZpcnN0TmFtZSxcbiAgICAgIEZhbWlseU5hbWU6IGN1c3RvbWVyLmxhc3ROYW1lLFxuICAgICAgUHJpbWFyeUVtYWlsQWRkcjoge0FkZHJlc3M6IGN1c3RvbWVyLmVtYWlsfSxcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5tYXBDdXN0b21lcihuZXdDdXN0b21lcik7XG4gIH1cblxuICBhc3luYyBnZXRJbnZvaWNlKG9yZGVyTnVtYmVyOiBudW1iZXIpOiBQcm9taXNlPGFueT4ge1xuICAgIGNvbnN0IHFibyA9IHRoaXMuZ2V0Q2xpZW50KCk7XG4gICAgY29uc3QgZmluZEludm9pY2VzID0gcHJvbWlzaWZ5KHFiby5maW5kSW52b2ljZXMpLmJpbmQocWJvKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZpbmRJbnZvaWNlcyh7XG4gICAgICBEb2NOdW1iZXI6IFN0cmluZyhvcmRlck51bWJlciksXG4gICAgfSk7XG4gICAgY29uc3QgaW52b2ljZSA9IHJlc3BvbnNlLlF1ZXJ5UmVzcG9uc2UuSW52b2ljZSAmJlxuICAgICAgICByZXNwb25zZS5RdWVyeVJlc3BvbnNlLkludm9pY2VbMF07XG4gICAgcmV0dXJuIGludm9pY2U7XG4gIH1cblxuICBhc3luYyBjcmVhdGVJbnZvaWNlKG9yZGVyOiBhbnksIGN1c3RvbWVyOiBDdXN0b21lcik6IFByb21pc2U8YW55PiB7XG4gICAgY29uc3QgcWJvID0gdGhpcy5nZXRDbGllbnQoKTtcbiAgICBjb25zdCBjcmVhdGVJbnZvaWNlID0gcHJvbWlzaWZ5KHFiby5jcmVhdGVJbnZvaWNlKS5iaW5kKHFibyk7XG4gICAgY29uc3QgaW52b2ljZSA9IHtcbiAgICAgIEN1c3RvbWVyUmVmOiB7XG4gICAgICAgIHZhbHVlOiBjdXN0b21lci5yZWYuSWQsXG4gICAgICAgIG5hbWU6IGN1c3RvbWVyLnJlZi5EaXNwbGF5TmFtZSxcbiAgICAgIH0sXG4gICAgICBCaWxsRW1haWw6IHtBZGRyZXNzOiBjdXN0b21lci5lbWFpbH0sXG4gICAgICBEb2NOdW1iZXI6IG9yZGVyLm51bWJlcixcbiAgICAgIFRyYWNraW5nTnVtOiBvcmRlci50cmFuc2FjdGlvbl9pZCxcbiAgICAgIFR4bkRhdGU6IG9yZGVyLmRhdGUsXG4gICAgICBEdWVEYXRlOiBvcmRlci5kYXRlLFxuICAgICAgTGluZTogb3JkZXIubGluZV9pdGVtcy5tYXAoKGxpbmVJdGVtOiBhbnksIGk6IG51bWJlcikgPT4gKHtcbiAgICAgICAgTGluZU51bTogaSArIDEsXG4gICAgICAgIERlc2NyaXB0aW9uOiBsaW5lSXRlbS5uYW1lLFxuICAgICAgICBEZXRhaWxUeXBlOiAnU2FsZXNJdGVtTGluZURldGFpbCcsXG4gICAgICAgIEFtb3VudDogTnVtYmVyKGxpbmVJdGVtLmxpbmVfdG90YWwpLFxuICAgICAgICBTYWxlc0l0ZW1MaW5lRGV0YWlsOiB7XG4gICAgICAgICAgUXR5OiBOdW1iZXIobGluZUl0ZW0ucXVhbnRpdHkpLFxuICAgICAgICAgIFVuaXRQcmljZTogTnVtYmVyKGxpbmVJdGVtLnVuaXRfcHJpY2UpLFxuICAgICAgICB9LFxuICAgICAgfSkpLFxuICAgIH07XG4gICAgY29uc3QgbmV3SW52b2ljZSA9IGF3YWl0IGNyZWF0ZUludm9pY2UoaW52b2ljZSk7XG4gICAgcmV0dXJuIG5ld0ludm9pY2U7XG4gIH1cblxuICBwcml2YXRlIG1hcEN1c3RvbWVyKGN1c3RvbWVyOiBhbnl8bnVsbCk6IEN1c3RvbWVyfG51bGwge1xuICAgIHJldHVybiBjdXN0b21lciA/IHtcbiAgICAgIGlkOiBjdXN0b21lci5JZCxcbiAgICAgIGZpcnN0TmFtZTogY3VzdG9tZXIuR2l2ZW5OYW1lLFxuICAgICAgbGFzdE5hbWU6IGN1c3RvbWVyLkZhbWlseU5hbWUsXG4gICAgICBlbWFpbDogY3VzdG9tZXIuUHJpbWFyeUVtYWlsQWRkci5BZGRyZXNzLFxuICAgICAgcmVmOiBjdXN0b21lcixcbiAgICB9IDogbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0Q2xpZW50KCk6IFF1aWNrQm9va3Mge1xuICAgIHJldHVybiBuZXcgUXVpY2tCb29rcyhcbiAgICAgICAgY29uZmlnLmNsaWVudElkLFxuICAgICAgICBjb25maWcuY2xpZW50U2VjcmV0LFxuICAgICAgICB0aGlzLm9BdXRoQ2xpZW50LnRva2VuLmFjY2Vzc190b2tlbixcbiAgICAgICAgZmFsc2UsXG4gICAgICAgICcnICsgdGhpcy5vQXV0aENsaWVudC50b2tlbi5yZWFsbUlkLFxuICAgICAgICBjb25maWcuZW52aXJvbm1lbnQgPT09ICdzYW5kYm94JyxcbiAgICAgICAgY29uZmlnLmRlYnVnLFxuICAgICAgICAzNCxcbiAgICAgICAgJzIuMCcsXG4gICAgICAgIHRoaXMub0F1dGhDbGllbnQudG9rZW4ucmVmcmVzaF90b2tlbik7XG4gfVxufVxuIl19